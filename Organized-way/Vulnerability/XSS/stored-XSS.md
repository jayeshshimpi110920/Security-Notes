## Stored XSS (Persistent XSS)

**Behavior**: In Stored XSS, the malicious script is stored on the server (e.g., in a database) and gets executed when users visit a page that loads the data.

**Timing**: The payload may not execute immediately after being injected. It depends on when the stored data is displayed on the affected page.

**Example**: If you inject the script in a comment field, it wonâ€™t execute right away. It will only execute when the page displaying the comments is loaded or refreshed.


**Test Scenario**:

Input a malicious script into a form (e.g., comment, profile description).

Navigate to the page where that input is reflected to see if the script is executed.

**Visibility**: The script only executes when another user or the same user loads the page where the malicious input is displayed.

---
## how to prevent stored-XSS :

1) **input validation**(whitelisting only accepting specific character and pattern and block other) and **sanitization**(remove malicious script) by special escape character
2) **Content Security Policy (CSP) Implement CSP header**: Use a strong Content Security Policy to restrict the sources from which scripts can be loaded and executed. This can help mitigate the impact of XSS vulnerabilities.
3) **HTTP Only and Secure Cookies**

>**Set HttpOnly Flag on Cookies**: This prevents JavaScript from accessing the cookie data, reducing the risk of session hijacking through XSS.

>**Use Secure Cookies**: Ensure cookies are transmitted over HTTPS to protect against man-in-the-middle attacks.

4) **Avoid Inline javascript Event Handlers**: Instead of using inline JavaScript (e.g., onclick attributes), attach event handlers using JavaScript in a safe context.

---
## how to find stored-xss :

look out for the input field and try it out payload.

1) **Burpsuite**: `intruder` used to automate the injection of various payload. `Repeater` used manually manipulate request to test payload
2) **OWASP zap**: Use `Active scan` features to look for stored xss vulnerabilities
3) **Nikto** : Run Nikto, a web server scanner which find out various vulnerabilities, including XSS.





extra note  :
5. Fuzzing Tools:

Use fuzzing tools like FuzzDB or Wfuzz to automate the injection of payloads into input fields to see if the application is vulnerable.

6. Manual Payload Testing Tools:

Use tools like XSSer or XSSerator for automated payload testing for XSS vulnerabilities.





 
